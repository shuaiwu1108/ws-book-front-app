(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/books/news-page"],{"2a9c":function(t,e,i){"use strict";var n=i("ed21"),a=i.n(n);a.a},"440a":function(t,e,i){"use strict";i.r(e);var n=i("6e8d"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"6e8d":function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("9523")),o=(i("40e6"),{components:{uniLoadMore:function(){i.e("components/uni-load-more").then(function(){return resolve(i("0de1"))}.bind(null,i)).catch(i.oe)},bookInfo:function(){i.e("pages/books/news-item").then(function(){return resolve(i("6888"))}.bind(null,i)).catch(i.oe)}},props:{booktype:{type:[String],default:""}},data:function(){var t;return t={dataList:[],navigateFlag:!1,pulling:!1,refreshing:!1,refreshFlag:!1,refreshText:"",isLoading:!1,loadingText:"加载中...",isNoData:!1},(0,a.default)(t,"pulling",!1),(0,a.default)(t,"angle",0),(0,a.default)(t,"listCount",1),(0,a.default)(t,"loadingMoreText",{contentdown:"",contentrefresh:"",contentnomore:""}),(0,a.default)(t,"refreshIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg=="),t},created:function(){this.pullTimer=null,this.requestParams={source:"bqg",bookType:this.booktype,pageIndex:1,pageSize:10},this._isWidescreen=!1},methods:{loadData:function(e){var i=this;this.isLoading||(this.isNoData?this.loadingText="到底啦":(this.isLoading=!0,this.isNoData=!1,this.requestParams.pageIndex=this.listCount,t.request({url:this.$host+"/api/book/list",data:this.requestParams,method:"POST",success:function(t){var n=t.data;if(null==n||n.length<10)return i.isNoData=!0,void(i.loadingText="到底啦");var a=n.map((function(t){return{id:t.id,article_type:1,description:t.description,icon:t.icon,name:t.name,author_name:t.authorId,book_source:t.bookSource}}));e?(i.dataList=a,i.requestParams.pageIndex=1,i.listCount=1,console.info(i.listCount)):(i.dataList=i.dataList.concat(a),i.listCount=i.listCount+1),i.dataList.length>0&&i._isWidescreen&&i.dataList.length<=10&&i.goDetail(i.dataList[0])},fail:function(t){0==i.dataList.length&&(i.isNoData=!0)},complete:function(t){i.isLoading=!1,e&&(i.refreshing=!1,i.refreshFlag=!1,i.refreshText="已刷新",i.pullTimer&&clearTimeout(i.pullTimer),i.pullTimer=setTimeout((function(){i.pulling=!1}),1e3))}})))},loadMore:function(t){this.loadData()},clear:function(){this.dataList.length=0,this.requestParams.pageIndex=1,this.listCount=0},goDetail:function(e){this._isWidescreen?t.$emit("updateDetail",{detail:encodeURIComponent(JSON.stringify(e))}):t.navigateTo({url:"./detail?query="+encodeURIComponent(JSON.stringify(e))})},refreshData:function(){this.isLoading||(this.pulling=!0,this.refreshing=!0,this.refreshText="正在刷新...",this.loadData(!0))},onrefresh:function(t){this.refreshData()},onpullingdown:function(t){this.refreshing||(this.pulling=!1,Math.abs(t.pullingDistance)>Math.abs(t.viewHeight)?(this.refreshFlag=!0,this.refreshText="释放立即刷新"):(this.refreshFlag=!1,this.refreshText="下拉可以刷新"))}}});e.default=o}).call(this,i("543d")["default"])},ed21:function(t,e,i){},f2e9:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.isLoading||this.dataList.length>4);this.$mp.data=Object.assign({},{$root:{g0:e}})},a=[]},fad7:function(t,e,i){"use strict";i.r(e);var n=i("f2e9"),a=i("440a");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("2a9c");var s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"da143190",null,!1,n["a"],void 0);e["default"]=r.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/books/news-page-create-component',
    {
        'pages/books/news-page-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("fad7"))
        })
    },
    [['pages/books/news-page-create-component']]
]);
